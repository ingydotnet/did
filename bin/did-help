#!/usr/bin/env bash

source "$(dirname $BASH_SOURCE)/../lib/use.bash"

main() {
  if [[ $# -eq 0 ]]; then
    overview
  else
    command="$1"; shift
    [[ $command =~ ^[a-zA-Z]+$ ]] ||
      die "Invalid help topic: '$command'"
    [[ $# -eq 0 ]] ||
      die "Unknown arguments: '$@'"
    can help:$command ||
      die "No help for command: '$command'"
    "help:$command"
  fi
}

overview() {
  cat <<...
did - A CLI tool for working with Docker ID container images.


See:
* http://info.dockerid.com
* 'man did' for complete documentation.
* 'did help <command>' for specific doc.


Usage: did  <subcommands> [options]

Subcommands:
build   Add Docker ID layers to a 'docker build' image
cmd     Print a 'docker run' command for an entrypoint
cmds    List all commands (entrypoints) for an image
help    Show command help
id      Print Docker ID data for an image to stdout
run     Run the docker command for an entrypoint
search  Find existing 'did' images

Options:
--help -h         Show command help

...
}

help:build() {
  cat <<...
did - A CLI tool for working with Docker ID container images.


Usage: did build <id>

Parameters:
id  *      docker id

...
}

help:cmd() {
  cat <<...
did - A CLI tool for working with Docker ID container images.


Usage: did cmd <id>

Parameters:
id  *      docker id

...
}

help:cmds() {
  cat <<...
did - A CLI tool for working with Docker ID container images.


Usage: did cmds


...
}

help:help() {
  cat <<...
did - A CLI tool for working with Docker ID container images.


Usage: did help <subcommands> [options]

Subcommands:
_complete  
build      
cmd        
cmds       
id         
run        
search     

Options:
--all         

...
}

help:id() {
  cat <<...
did - A CLI tool for working with Docker ID container images.


Usage: did id <id>

Parameters:
id  *      docker id

...
}

help:run() {
  cat <<...
did - A CLI tool for working with Docker ID container images.


Usage: did run <id>

Parameters:
id  *      docker id

...
}

help:search() {
  cat <<...
did - A CLI tool for working with Docker ID container images.


Usage: did search [<q>]

Parameters:
q         The search parameter

...
}


[[ $0 != "$BASH_SOURCE" ]] || main "$@"

# vim: set ft=sh lisp:
